/* --- Design System & Global CSS --- */
:root {
    --background: oklch(0.145 0 0);
    --foreground: oklch(0.985 0 0);
    --primary: oklch(0.985 0 0);
    --primary-foreground: oklch(0.205 0 0);
    --border: oklch(0.269 0 0);
    --radius: 0.625rem;
    --font-size: 14px;
    --font-weight-medium: 500;
}

/* --- Base Styles --- */
* { box-sizing: border-box; border-color: var(--border); }
html { font-size: var(--font-size); }
body {
    background-color: var(--background);
    color: var(--foreground);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    margin: 0;
    min-height: 100vh;
    overflow: hidden;
}

/* --- Main Layout --- */
.app-container {
    min-height: 100vh;
    background: linear-gradient(to bottom right, #0f172a, #300a24, #0f172a);
    position: relative;
    overflow: hidden;
}
.content-wrapper {
    position: relative;
    z-index: 10;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    text-align: center;
}
.main-content-area { max-width: 48rem; margin: auto; display: flex; flex-direction: column; gap: 3rem; }

/* --- Typography --- */
h1 { font-size: 2.25rem; line-height: 2.5rem; color: rgba(255, 255, 255, 0.9); }
p { font-size: 1.25rem; line-height: 1.75rem; color: rgba(255, 255, 255, 0.7); max-width: 32rem; margin: auto; }

/* --- Feature & Button Layout --- */
.feature-display-area { min-height: 300px; display: flex; align-items: center; justify-content: center; }
.initial-message, .environment-instructions { color: rgba(255, 255, 255, 0.5); font-size: 1.125rem; }
.action-buttons-wrapper { display: flex; flex-direction: column; gap: 1.5rem; }
.action-buttons { display: flex; flex-direction: column; gap: 0.75rem; justify-content: center; align-items: center; }
@media (min-width: 640px) { .action-buttons { flex-direction: row; } }
.environment-selection { display: flex; flex-direction: column; gap: 0.75rem; }
.env-selection-label { font-size: 0.875rem; color: rgba(255, 255, 255, 0.6); margin: 0; }

/* --- Buttons --- */
.feature-btn {
    display: inline-flex; align-items: center; justify-content: center; white-space: nowrap; border-radius: var(--radius);
    font-size: 0.875rem; font-weight: var(--font-weight-medium); padding: 0.5rem 1rem; width: 100%; cursor: pointer;
    background-color: rgba(255, 255, 255, 0.1); color: var(--foreground); border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease; backdrop-filter: blur(4px);
}
.feature-btn.lg { font-size: 1rem; padding: 0.75rem 1.5rem; }
@media (min-width: 640px) { .feature-btn { width: auto; } }
.feature-btn:hover { background-color: rgba(255, 255, 255, 0.2); border-color: rgba(255, 255, 255, 0.3); }
.feature-btn.active { background-color: var(--primary); color: var(--primary-foreground); border-color: var(--primary); }
.feature-btn svg { width: 1rem; height: 1rem; margin-right: 0.5rem; }
.feature-btn.lg svg { width: 1.25rem; height: 1.25rem; }

/* --- Utility --- */
.hidden { display: none !important; }

/* --- Breathing Animation --- */
.breathing-animation { display: flex; flex-direction: column; align-items: center; gap: 2rem; }
.breathing-circle-container { position: relative; width: 16rem; height: 16rem; display: flex; align-items: center; justify-content: center; }
#breathing-circle {
    width: 8rem; height: 8rem; border-radius: 9999px;
    background: linear-gradient(to bottom right, rgba(59, 130, 246, 0.3), rgba(168, 85, 247, 0.3));
    border: 1px solid rgba(255, 255, 255, 0.2); backdrop-filter: blur(4px);
    transition-property: transform; transition-timing-function: ease-in-out;
}
#breathing-instructions { font-size: 1.5rem; color: rgba(255, 255, 255, 0.8); transition: opacity 0.5s ease; }
.fade-out { opacity: 0; }

/* --- Kind Words --- */
.kind-words-display { display: flex; flex-direction: column; align-items: center; gap: 2rem; max-width: 42rem; margin: auto; }
.quote-display-wrapper { min-height: 150px; display: flex; align-items: center; justify-content: center; }
#kind-word-text {
    font-size: 1.5rem; line-height: 2rem; color: rgba(255, 255, 255, 0.9); padding: 0 2rem;
    position: relative; transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
}
#kind-word-text::before, #kind-word-text::after { position: absolute; font-size: 4rem; line-height: 1; color: rgba(255, 255, 255, 0.2); }
#kind-word-text::before { content: '“'; top: -1rem; left: 0; }
#kind-word-text::after { content: '”'; bottom: -2.5rem; right: 0; }
#another-word-btn .refresh-icon { transition: transform 0.5s ease; }
#another-word-btn.refreshing .refresh-icon { transform: rotate(360deg); }

/* --- Environment Base --- */
.environment-container { position: fixed; inset: 0; overflow: hidden; pointer-events: none; z-index: 1; }

/* --- Night Sky Environment --- */
.star { position: absolute; border-radius: 50%; background-color: white; animation-name: twinkle; animation-timing-function: ease-in-out; animation-iteration-count: infinite; }
.shooting-star { position: absolute; width: 1px; height: 1px; background-color: white; border-radius: 50%; animation-name: shoot; animation-timing-function: ease-out; animation-iteration-count: 1; }
.galaxy-particle { position: absolute; border-radius: 50%; animation-name: twinkle; animation-timing-function: ease-in-out; animation-iteration-count: infinite; }
.nebula-cloud { position: absolute; border-radius: 50%; filter: blur(1.5rem); }
@keyframes twinkle { 0%, 100% { opacity: var(--start-opacity); transform: scale(1); } 50% { opacity: calc(var(--start-opacity) * 0.3); transform: scale(1.2); } }
@keyframes shoot { 0% { transform: translate(0, 0) scale(1); opacity: 0; } 5% { opacity: 1; } 95% { opacity: 1; } 100% { transform: var(--translate-end); opacity: 0; scale: 1.5; } }

/* --- Mountains Environment --- */
.mountains-container svg { position: absolute; bottom: 0; width: 100%; height: auto; }
.mountain-cloud { position: absolute; background-color: white; border-radius: 50%; animation-name: drift; animation-timing-function: linear; animation-iteration-count: infinite; }
.mountain-bird { position: absolute; color: rgba(255, 255, 255, 0.4); animation-name: fly; animation-timing-function: linear; animation-iteration-count: infinite; }
@keyframes drift { from { transform: translateX(-20vw); } to { transform: translateX(120vw); } }
@keyframes fly { from { transform: translateX(-10vw); } to { transform: translateX(110vw); } }

/* --- Beach Environment --- */
.beach-container .ocean { position: absolute; bottom: 0; width: 100%; height: 66.67%; background: linear-gradient(to top, rgba(59, 130, 246, 0.4), rgba(6, 182, 212, 0.2)); }
.beach-container .sand { position: absolute; bottom: 0; width: 100%; height: 16.67%; background: linear-gradient(to top, rgba(254, 249, 195, 0.3), transparent); }
.beach-container .sun { position: absolute; top: 5rem; right: 6rem; width: 5rem; height: 5rem; border-radius: 50%; background: linear-gradient(to bottom right, #fef08a, #fb923c); opacity: 0.7; animation: pulse 5s ease-in-out infinite; }
.wave { position: absolute; bottom: 0; width: 100%; animation-name: wave-bob; animation-timing-function: ease-in-out; animation-iteration-count: infinite; }
.wave path { animation-name: wave-morph; animation-timing-function: ease-in-out; animation-iteration-count: infinite; }
.beach-cloud { position: absolute; background-color: white; border-radius: 50%; animation-name: drift; animation-timing-function: linear; animation-iteration-count: infinite; }
.seagull { position: absolute; color: rgba(255, 255, 255, 0.6); animation-name: fly; animation-timing-function: linear; animation-iteration-count: infinite; }
@keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.7; } 50% { transform: scale(1.05); opacity: 0.8; } }
@keyframes wave-bob { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
@keyframes wave-morph { 0%, 100% { d: path("M0,50 Q300,20 600,50 T1200,50 L1200,100 L0,100 Z"); } 50% { d: path("M0,50 Q300,80 600,50 T1200,50 L1200,100 L0,100 Z"); } }

/* Wish Modal */
.wish-modal-wrapper {
    position: fixed; inset: 0; z-index: 50; display: flex; align-items: center; justify-content: center;
    pointer-events: auto; background-color: rgba(0,0,0,0.3); backdrop-filter: blur(2px);
    opacity: 0; transition: opacity 0.3s ease;
}
.wish-modal-wrapper:not(.hidden) { opacity: 1; }
.wish-modal-content {
    background-color: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px);
    border-radius: 0.5rem; padding: 1.5rem; text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.2);
    display: flex; flex-direction: column; gap: 1rem;
    transform: scale(0.95); transition: transform 0.3s ease;
}
.wish-modal-wrapper:not(.hidden) .wish-modal-content { transform: scale(1); }
.wish-icon { font-size: 1.875rem; }
.wish-icon.large { font-size: 2.25rem; }
.wish-modal-content h3 { font-size: 1.25rem; color: rgba(255, 255, 255, 0.9); margin: 0; }
.wish-modal-content p { font-size: 0.875rem; color: rgba(255, 255, 255, 0.7); margin: 0; }
.wish-modal-content p.large-text { font-size: 1rem; color: rgba(255,255,255,0.9); }
.wish-input-group { display: flex; flex-direction: column; gap: 0.75rem; }
#wish-input {
    width: 100%; padding: 0.5rem 0.75rem; background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 0.25rem;
    color: white; placeholder-color: rgba(255, 255, 255, 0.5);
}
#wish-input:focus { outline: none; border-color: rgba(255, 255, 255, 0.4); }
#make-wish-btn {
    padding: 0.5rem 1rem; background-color: rgba(255, 255, 255, 0.2);
    border: none; border-radius: 0.25rem; color: white; cursor: pointer;
    transition: background-color 0.2s;
}
#make-wish-btn:hover { background-color: rgba(255, 255, 255, 0.3); }
